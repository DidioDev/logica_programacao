{"ast":null,"code":"// Global var definitions\nconst todoTitleInput = document.querySelector(\"#todoTitle\");\nconst addTodoForm = document.querySelector(\"#addTodoForm\");\nconst todoListOutput = document.querySelector(\"#todoList\");\nlet allTodoList = [];\nlet isEditMode = false;\nlet selectedIndex = null; // Main function ----------------\n\nfunction start() {\n  addTodoForm.addEventListener(\"submit\", handleSubmitTodo);\n  getTodoListFromLocalStorage();\n  renderTodoList();\n  todoTitleInput.focus();\n} // Actions functions ----------------\n\n\nfunction handleSubmitTodo(event) {\n  event.preventDefault();\n  todoTitleInput.focus();\n  const title = todoTitleInput.value.trim();\n\n  if (!title) {\n    clearInput();\n    return;\n  }\n\n  if (isEditMode) {\n    handleUpdateTodo(title);\n  } else {\n    handleAddTodo(title);\n  }\n\n  clearInput();\n  renderTodoList();\n}\n\nfunction toggleTodoUpdateMode(event) {\n  const itemToUpdate = Number(event.currentTarget.id.split(\"-\")[1]);\n  todoTitleInput.value = allTodoList[itemToUpdate].title;\n  selectedIndex = itemToUpdate;\n  isEditMode = true;\n  todoTitleInput.focus();\n}\n\nfunction handleAddTodo(todoTitle) {\n  allTodoList.push({\n    title: todoTitle,\n    isDone: false\n  });\n}\n\nfunction handleUpdateTodo(todoTitle) {\n  allTodoList[selectedIndex].title = todoTitle;\n}\n\nfunction handleDeleteTodo(event) {\n  let confirmDelete = \"Você tem certeza que quer deletar a tarefa?\";\n\n  if (confirmDelete) {\n    const itemIndexToDelete = Number(event.currentTarget.id.split(\"-\")[1]);\n    allTodoList = allTodoList.filter((_, i) => i !== itemIndexToDelete);\n  }\n\n  renderTodoList();\n}\n\nfunction handleCompleteTodo(event) {\n  const itemToComplete = Number(event.currentTarget.id.split(\"-\")[1]);\n  allTodoList.forEach((todo, index) => {\n    if (index === itemToComplete) {\n      todo.isDone = !todo.isDone;\n    }\n  });\n  renderTodoList();\n} // HTML construction funciton ----------------\n\n\nfunction createTodoItemHTML(itemData, itemIndex) {\n  const {\n    title,\n    isDone\n  } = itemData; //prettier-ignore\n\n  return `\n    <li>\n      <span class=\"todo-text ${isDone ? \"completed\" : \"\"}\">\n        <input type=\"checkbox\" id=\"item-${itemIndex}\" ${isDone ? \"checked\" : \"\"} />${title}</span>\n      <div class=\"todo-list-controls\">\n        <button type=\"button\" id=\"update_item-${itemIndex}\" class=\"btn btn-update\"> <i class=\"far fa-edit\"></i> </button>\n        <button type=\"button\" id=\"del_item-${itemIndex}\" class=\"btn btn-delete\"> <i class=\"far fa-trash-alt\"></i> </button>\n      </div>  \n    </li>\n  `;\n} // Render funciton ----------------\n\n\nfunction renderTodoList() {\n  if (allTodoList.length === 0) {\n    removeTodoListFromLocalStorage();\n    return todoListOutput.innerHTML = \"<p class='info-message'>Nenhuma tarefa cadastrada.<p>\";\n  }\n\n  let todoListHTML = allTodoList.map((item, i) => {\n    return createTodoItemHTML(item, i);\n  });\n  todoListOutput.innerHTML = todoListHTML.join(\"\");\n  allTodoList.forEach((_, i) => {\n    const checkbox = document.getElementById(`item-${i}`);\n    const deleteButton = document.getElementById(`del_item-${i}`);\n    const updateButton = document.getElementById(`update_item-${i}`);\n    checkbox.addEventListener(\"input\", handleCompleteTodo);\n    deleteButton.addEventListener(\"click\", handleDeleteTodo);\n    updateButton.addEventListener(\"click\", toggleTodoUpdateMode);\n  });\n  setTodoListToLocalStorage();\n} //ARMAZENAMENTO LOCALSTORAGE\n\n\nfunction getTodoListFromLocalStorage() {\n  const localStorageList = JSON.parse(localStorage.getItem(\"todoList\"));\n\n  if (localStorageList) {\n    allTodoList = localStorageList;\n  }\n}\n\nfunction setTodoListToLocalStorage() {\n  localStorage.setItem(\"todoList\", JSON.stringify(allTodoList));\n}\n\nfunction removeTodoListFromLocalStorage() {\n  localStorage.removeItem(\"todoList\");\n} //FUNÇÃO AUXILIAR\n\n\nfunction clearInput() {\n  isEditMode = false;\n  todoTitleInput.value = \"\";\n} //EXECUTAR FUNÇÃO PRINCIPAL\n\n\nstart();","map":{"version":3,"names":["todoTitleInput","document","querySelector","addTodoForm","todoListOutput","allTodoList","isEditMode","selectedIndex","start","addEventListener","handleSubmitTodo","getTodoListFromLocalStorage","renderTodoList","focus","event","preventDefault","title","value","trim","clearInput","handleUpdateTodo","handleAddTodo","toggleTodoUpdateMode","itemToUpdate","Number","currentTarget","id","split","todoTitle","push","isDone","handleDeleteTodo","confirmDelete","itemIndexToDelete","filter","_","i","handleCompleteTodo","itemToComplete","forEach","todo","index","createTodoItemHTML","itemData","itemIndex","length","removeTodoListFromLocalStorage","innerHTML","todoListHTML","map","item","join","checkbox","getElementById","deleteButton","updateButton","setTodoListToLocalStorage","localStorageList","JSON","parse","localStorage","getItem","setItem","stringify","removeItem"],"sources":["D:/Técnico TI/logica_programacao/programacao_web/prova_final/tarefa-lista/src/App.js"],"sourcesContent":["// Global var definitions\r\nconst todoTitleInput = document.querySelector(\"#todoTitle\");\r\nconst addTodoForm = document.querySelector(\"#addTodoForm\");\r\nconst todoListOutput = document.querySelector(\"#todoList\");\r\n\r\nlet allTodoList = [];\r\nlet isEditMode = false;\r\nlet selectedIndex = null;\r\n\r\n// Main function ----------------\r\nfunction start() {\r\n    addTodoForm.addEventListener(\"submit\", handleSubmitTodo);\r\n    getTodoListFromLocalStorage();\r\n    renderTodoList();\r\n    todoTitleInput.focus();\r\n}\r\n\r\n// Actions functions ----------------\r\nfunction handleSubmitTodo(event) {\r\n  event.preventDefault();\r\n  todoTitleInput.focus();\r\n  const title = todoTitleInput.value.trim();\r\n  if (!title) {\r\n    clearInput();\r\n    return;\r\n  }\r\n  if (isEditMode) {\r\n    handleUpdateTodo(title);\r\n  } else {\r\n    handleAddTodo(title);\r\n  }\r\n  clearInput();\r\n  renderTodoList();\r\n}\r\n\r\nfunction toggleTodoUpdateMode(event) {\r\n  const itemToUpdate = Number(event.currentTarget.id.split(\"-\")[1]);\r\n  todoTitleInput.value = allTodoList[itemToUpdate].title;\r\n  selectedIndex = itemToUpdate;\r\n  isEditMode = true;\r\n  todoTitleInput.focus();\r\n}\r\n\r\nfunction handleAddTodo(todoTitle) {\r\n  allTodoList.push({ title: todoTitle, isDone: false });\r\n}\r\n\r\nfunction handleUpdateTodo(todoTitle) {\r\n  allTodoList[selectedIndex].title = todoTitle;\r\n}\r\n\r\nfunction handleDeleteTodo(event) {\r\n  let confirmDelete = (\"Você tem certeza que quer deletar a tarefa?\");\r\n  if (confirmDelete) {\r\n    const itemIndexToDelete = Number(event.currentTarget.id.split(\"-\")[1]);\r\n    allTodoList = allTodoList.filter((_, i) => i !== itemIndexToDelete);\r\n  }\r\n  renderTodoList();\r\n}\r\n\r\nfunction handleCompleteTodo(event) {\r\n  const itemToComplete = Number(event.currentTarget.id.split(\"-\")[1]);\r\n  allTodoList.forEach((todo, index) => {\r\n    if (index === itemToComplete) {\r\n      todo.isDone = !todo.isDone;\r\n    }\r\n  });\r\n  renderTodoList();\r\n}\r\n\r\n// HTML construction funciton ----------------\r\n\r\nfunction createTodoItemHTML(itemData, itemIndex) {\r\n  const { title, isDone } = itemData;\r\n  //prettier-ignore\r\n  return `\r\n    <li>\r\n      <span class=\"todo-text ${isDone ? \"completed\" : \"\"}\">\r\n        <input type=\"checkbox\" id=\"item-${itemIndex}\" ${isDone ? \"checked\" : \"\"} />${title}</span>\r\n      <div class=\"todo-list-controls\">\r\n        <button type=\"button\" id=\"update_item-${itemIndex}\" class=\"btn btn-update\"> <i class=\"far fa-edit\"></i> </button>\r\n        <button type=\"button\" id=\"del_item-${itemIndex}\" class=\"btn btn-delete\"> <i class=\"far fa-trash-alt\"></i> </button>\r\n      </div>  \r\n    </li>\r\n  `;\r\n}\r\n\r\n// Render funciton ----------------\r\n\r\nfunction renderTodoList() {\r\n  if (allTodoList.length === 0) {\r\n    removeTodoListFromLocalStorage();\r\n    return (todoListOutput.innerHTML =\r\n      \"<p class='info-message'>Nenhuma tarefa cadastrada.<p>\");\r\n  }\r\n\r\n  let todoListHTML = allTodoList.map((item, i) => {\r\n    return createTodoItemHTML(item, i);\r\n  });\r\n\r\n    todoListOutput.innerHTML = todoListHTML.join(\"\");\r\n\r\n    allTodoList.forEach((_, i) => {\r\n        const checkbox = document.getElementById(`item-${i}`);\r\n        const deleteButton = document.getElementById(`del_item-${i}`);\r\n        const updateButton = document.getElementById(`update_item-${i}`);\r\n        checkbox.addEventListener(\"input\", handleCompleteTodo);\r\n        deleteButton.addEventListener(\"click\", handleDeleteTodo);\r\n        updateButton.addEventListener(\"click\", toggleTodoUpdateMode);\r\n  });\r\n\r\n    setTodoListToLocalStorage();\r\n}\r\n\r\n//ARMAZENAMENTO LOCALSTORAGE\r\nfunction getTodoListFromLocalStorage() {\r\n    const localStorageList = JSON.parse(localStorage.getItem(\"todoList\"));\r\n    if (localStorageList) {\r\n        allTodoList = localStorageList;\r\n    }\r\n}\r\n\r\nfunction setTodoListToLocalStorage() {\r\n    localStorage.setItem(\"todoList\", JSON.stringify(allTodoList));\r\n}\r\n\r\nfunction removeTodoListFromLocalStorage() {\r\n    localStorage.removeItem(\"todoList\");\r\n}\r\n\r\n//FUNÇÃO AUXILIAR\r\nfunction clearInput() {\r\n    isEditMode = false;\r\n    todoTitleInput.value = \"\";\r\n}\r\n\r\n//EXECUTAR FUNÇÃO PRINCIPAL\r\nstart();"],"mappings":"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"},"metadata":{},"sourceType":"module"}